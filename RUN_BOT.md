# üöÄ Business Bot MVP ‚Äî Stage 4

**–°—Ç–∞—Ç—É—Å**: ‚úÖ MVP Ready for Demo (aiogram 3.x compatible)

## –ë—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫

### 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è
```bash
pip install -r requirements.txt
```

### 2. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
–°–æ–∑–¥–∞–π—Ç–µ `.env.local` —Ñ–∞–π–ª:
```bash
cp .env.local.example .env.local
```

–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:
- `BOT_TOKEN` ‚Äî –ø–æ–ª—É—á–∏—Ç—å –æ—Ç [@BotFather](https://t.me/botfather)
- `ADMIN_IDS` ‚Äî –≤–∞—à Telegram ID (–ø–æ–ª—É—á–∏—Ç—å –æ—Ç [@getmyid_bot](https://t.me/getmyid_bot))

### 3. –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞
```bash
python -m app.main
```

**–ò–ª–∏** (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ PYTHONPATH):
```bash
PYTHONPATH=. python app/main.py
```

## –î–µ–º–æ-—Å—Ü–µ–Ω–∞—Ä–∏–π (10 –º–∏–Ω—É—Ç)

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –±–æ—Ç–∞ –æ—Ç–∫—Ä–æ–π—Ç–µ Telegram –∏ –Ω–∞–ø–∏—à–∏—Ç–µ –±–æ—Ç—É:

1. `/start` ‚Äî –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
2. `üíá –£—Å–ª—É–≥–∏` ‚Äî –≤—ã–±—Ä–∞—Ç—å —É—Å–ª—É–≥—É
3. –í—ã–±—Ä–∞—Ç—å –º–∞—Å—Ç–µ—Ä–∞ –∏ —É–≤–∏–¥–µ—Ç—å —Ä–µ–π—Ç–∏–Ω–≥ ‚≠ê
4. –í—ã–±—Ä–∞—Ç—å –¥–∞—Ç—É –≤ —Ñ–æ—Ä–º–∞—Ç–µ `YYYY-MM-DD`
5. –í—ã–±—Ä–∞—Ç—å –≤—Ä–µ–º—è –∏–∑ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Å–ª–æ—Ç–æ–≤
6. –í–≤–µ—Å—Ç–∏ –∏–º—è –∏ —Ç–µ–ª–µ—Ñ–æ–Ω
7. –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –∑–∞–ø–∏—Å—å
8. –ñ–¥–∞—Ç—å –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π (24h, 1h)
9. –ü–æ–ª—É—á–∏—Ç—å –∑–∞–ø—Ä–æ—Å –æ—Ç–∑—ã–≤–∞ –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è

## –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—Å–∫–∏–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –î–æ–±–∞–≤–∏—Ç—å –º–∞—Å—Ç–µ—Ä–∞
/add_master John|Expert barber|+1234567890

# –î–æ–±–∞–≤–∏—Ç—å —É—Å–ª—É–≥—É
/add_service Haircut|25.0|30|Professional haircut

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –º–∞—Å—Ç–µ—Ä–∞
/set_schedule 1|0|09:00|18:00|60

# –ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∑–∞–ø–∏—Å–∏
/list_bookings

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –æ—Ç–∑—ã–≤—ã
/list_reviews

# –ü–æ–ª—É—á–∏—Ç—å —Ä–µ–π—Ç–∏–Ω–≥ –º–∞—Å—Ç–µ—Ä–∞
/avg_rating master|1
```

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

- **Handlers**: `/app/handlers/` ‚Äî –ª–æ–≥–∏–∫–∞ –∫–æ–º–∞–Ω–¥ (client, booking, reviews, admin, services)
- **Repo**: `/app/repo.py` ‚Äî –≤—Å–µ DB –æ–ø–µ—Ä–∞—Ü–∏–∏ (SQL-only pattern)
- **Auto-complete**: `/app/auto_complete.py` ‚Äî grace period + –∞–≤—Ç–æ–∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ
- **Reminders**: `/app/reminders.py` ‚Äî –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è 24h + 1h
- **Database**: SQLite —Å 8 —Ç–∞–±–ª–∏—Ü–∞–º–∏, 5 –º–∏–≥—Ä–∞—Ü–∏–π

## –°—Ç–∞—Ç—É—Å Stage 4

‚úÖ **MVP Features**:
- –ü–æ–ª–Ω—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è (service ‚Üí master ‚Üí date ‚Üí time ‚Üí contact ‚Üí confirm)
- Grace period (5 min + duration)
- –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è (24h, 1h)
- –ê–≤—Ç–æ–∑–∞–ø—Ä–æ—Å –æ—Ç–∑—ã–≤–∞
- –†–µ–π—Ç–∏–Ω–≥–∏
- Admin panel (—Ç–µ–∫—Å—Ç–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã)
- –î–≤–æ–π–Ω–æ–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞—â–∏—Ç–∞

‚úÖ **Quality**:
- 60/60 —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ—Ö–æ–¥—è—Ç (100%)
- aiogram 3.x compatible
- .env.local –∑–∞–≥—Ä—É–∑–∫–∞
- –ù–µ—Ç –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫

‚ùÑÔ∏è **–ó–∞–º–æ—Ä–æ–∂–µ–Ω–Ω—ã–µ (–Ω–µ –≤ MVP)**:
- CSV export
- Exception management
- Web admin dashboard

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Ç–µ—Å—Ç—ã
python -m pytest tests/ -q

# –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ç–µ—Å—Ç
python -m pytest tests/test_booking.py -v
```

## –ó–∞–º–µ—Ç–∫–∏

- –ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ `RuntimeWarning: coroutine '_auto_complete' was never awaited` –ø—Ä–∏ —Ç–µ—Å—Ç–∞—Ö ‚Äî —ç—Ç–æ –æ–∂–∏–¥–∞–µ–º–æ (background tasks –≤ —Ç–µ—Å—Ç–µ)
- –î–ª—è production –Ω—É–∂–Ω–∞ –º–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ Web UI –≤–º–µ—Å—Ç–æ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –∫–æ–º–∞–Ω–¥
- Stage 5: Payment integration, web dashboard, multi-language

## –§–∞–π–ª—ã –ø—Ä–æ–µ–∫—Ç–∞

- [MVP_DEMO.md](MVP_DEMO.md) ‚Äî –ø–æ–ª–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ MVP
- [DEMO_QUICK_START.md](DEMO_QUICK_START.md) ‚Äî 10-–º–∏–Ω—É—Ç–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è
- [STAGE4_COMPLETE.md](STAGE4_COMPLETE.md) ‚Äî –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- [MVP_AUDIT.md](MVP_AUDIT.md) ‚Äî –∞—É–¥–∏—Ç –∫–æ–¥–∞

---

**–ì–æ—Ç–æ–≤–æ –∫ –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ –∫–ª–∏–µ–Ω—Ç–∞–º! üéâ**
